<html lang="en">
  <%- include("./partials/head.ejs") %>

  <body>
    <%- include("./partials/header.ejs") %>

    <div class="parallax">
      <section id="home" class="hero">
        <div class="container">
          <main class="container">
            <h2>Enjoy Your Healthy<br />Delicious Food</h2>
            <p>
              We provide creative, nutritious and cost effective catering
              solutions across Nairobi & East Africa. Book us for private or
              corporate events.
            </p>
            <a class="cta" href="#contact">Book an event</a>
            <div style="margin-top: 18px; color: white">
              <strong>Phone:</strong> +254 724 147 654 &nbsp; · &nbsp;
              <strong>Email:</strong> kijijicorporatecuisine@gmail.com
            </div>
          </main>
        </div>
        <!-- <div class="mascot card" >
          <!-- <img
            src="/clients.png"
            alt="hero"
            style="width: 100%; border-radius: 8px; display: block"
          />
          <div></div> -->
        <!-- </div> -->
      </section>
    </div>

    <main class="container">
      <section id="about">
        <h3>About Us</h3>
        <p style="color: var(--muted); margin-bottom: 12px">
          Learn more about us.
        </p>

        <section class="about-section">
          <!-- Image -->
          <div class="about-box" style="background: none; box-shadow: none">
            <img src="aboutUS.jpg" alt="Company Image" />
            <div
              class="about-box"
              style="
                background: none;
                box-shadow: none;
                display: flex;
                justify-content: center;
                align-items: center;
                text-align: center;
              "
            >
              <a href="tel:+254724147654" class="phone-link">
                <div class="cta">Call Now</div></a
              >
            </div>
          </div>

          <!-- About Us -->
          <div class="about-box" style="background: none; box-shadow: none">
            <div class="about-box">
              <p>
                We are an events company dedicated to creating memorable
                experiences for our clients. From weddings and corporate
                functions to concerts and private parties, we bring creativity
                and professionalism to every project.
              </p>
            </div>

            <!-- YouTube Video -->
            <div
              class="about-box"
              style="
                background: none;
                box-shadow: none;
                padding: 0px;
                margin-top: 20px;
              "
            >
              <iframe
                src="https://www.youtube.com/embed/dQw4w9WgXcQ"
                title="Company Video"
                allowfullscreen
              >
              </iframe>
            </div>
          </div>
        </section>
      </section>
    </main>
    <!-- Why Us Section -->
    <div class="div parallax">
      <section class="why-us">
        <div class="container">
          <div class="grid-2">
            <!-- Left Box -->
            <div class="why-box card feature">
              <h3>Why Choose KIJIJI CUISINE</h3>
              <p>
                Kijiji Cuisine Group Limited is a distinguished enterprise set
                to take catering services to the next level. We pride our brand
                on the consistent delivery of nutritional and sumptuous cuisine
                packaged with professional service.
              </p>
              <p>
                Our catering expertise uniquely stands out, enabling us to
                thrive in a globally competitive market. We focus on cultivating
                long-term relationships with clients by meeting diverse catering
                event needs for individuals and corporates.
              </p>
              <div class="text-center">
                <a href="tel:+254724147654" class="btn">Contact Us</a>
              </div>
            </div>

            <!-- Right Icon Grid -->
            <div class="grid-3">
              <div class="icon-box card feature">
                <i class="bi bi-clipboard-data"></i>
                <h4>Speed</h4>
                <p>
                  Fast service leading to reduced downtime and increased
                  operational efficiency.
                </p>
              </div>

              <div class="icon-box card feature">
                <i class="bi bi-gem"></i>
                <h4>Flexibility</h4>
                <p>
                  Flexibility to meet various catering needs in diet, meal
                  timings and location across East Africa.
                </p>
              </div>

              <div class="icon-box card feature">
                <i class="bi bi-inboxes"></i>
                <h4>Efficiency</h4>
                <p>
                  Support to event objectives through ensuring guest welfare,
                  allowing focus on proceedings.
                </p>
              </div>
              <div class="icon-box card feature">
                <i class="bi bi-inboxes"></i>
                <h4>Efficiency</h4>
                <p>
                  Support to event objectives through ensuring guest welfare,
                  allowing focus on proceedings.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <main class="container">
      <!-- Partners Section -->
      <section id="partners">
        <h3>Our Partners</h3>
        <p style="color: var(--muted); margin-bottom: 12px">
          These are just but a few of those who have trusted us with their
          catering needs.
        </p>
        <div class="card image-card" style="margin-top: 10px">
          <img src="/clients.png" alt="hero" />
        </div>
      </section>
    </main>

    <!-- Counter Section -->
    <div class="parallax-counter">
      <section id="counter">
        <div class="counter-section">
          <div class="counter-box">
            <div class="counter-number" data-target="232">0</div>
            <div class="counter-label">CLIENTS</div>
          </div>
          <div class="counter-box">
            <div class="counter-number" data-target="521">0</div>
            <div class="counter-label">EVENTS</div>
          </div>
          <div class="counter-box">
            <div class="counter-number" data-target="1453">0</div>
            <div class="counter-label">HOURS OF SUPPORT</div>
          </div>
          <div class="counter-box">
            <div class="counter-number" data-target="32">0</div>
            <div class="counter-label">PARTNERS</div>
          </div>
        </div>
      </section>
    </div>

    <!-- Menu Section -->
    <main class="container">
      <section id="menu">
        <h3>Our Menu</h3>
        <p style="color: var(--muted); margin-bottom: 12px">
          Select a category to expand sample items and rates.
        </p>

        <div class="menu-list">
          <div class="menu-cat card">
            <button onclick="togglePanel(this)">
              Platinum — Breakfast & Buffet
            </button>
            <div class="panel">
              <strong>Breakfast</strong>
              <ul>
                <li>Assorted fruit basket</li>
                <li>Tropical juices</li>
                <li>Cornflakes, oats</li>
              </ul>
              <strong>Buffet</strong>
              <ul>
                <li>Appetizers, Salad bar</li>
                <li>Hot chafing dishes (Proteins, Starches, Veggies)</li>
                <li>Desserts & Soft drinks</li>
              </ul>
            </div>
          </div>

          <div class="menu-cat card">
            <button onclick="togglePanel(this)">
              Gold — Breakfast & Buffet
            </button>
            <div class="panel">
              <p>
                Similar to Platinum with slightly different pricing and item
                selection (cold cuts, pastries).
              </p>
            </div>
          </div>

          <div class="menu-cat card">
            <button onclick="togglePanel(this)">
              Bronze — Light Breakfast & Buffet
            </button>
            <div class="panel">
              <p>Bagels, waffles, avocado toast, light buffet options.</p>
            </div>
          </div>

          <div class="menu-cat card">
            <button onclick="togglePanel(this)">Snacks & Canapés</button>
            <div class="panel">
              <ul>
                <li>Chicken & beef samosas, veggie spring rolls</li>
                <li>Mini mandazis, muffins, kebabs, mini desserts</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Testimonial Section-->
      <section id="testimonials">
        <h3>Testimonials</h3>
        <div class="card testi" style="margin-top: 10px">
          <img src="https://via.placeholder.com/80.png?text=F" alt="avatar" />
          <div>
            <strong>Fay Favourite</strong>
            <p style="color: var(--muted); margin: 6px 0 0">
              "The best cuisine crew in town... I just love how you will lick
              your fingers after a meal cooked by them. Bravo Kijiji Cuisine."
            </p>
          </div>
        </div>
      </section>

      <!-- Team Section-->
      <section id="team">
        <h3>Team</h3>
        <div class="kijiji-ceo">
          <!-- CEO content -->
          <div class="about-section" style="padding-bottom: 8px">
            <div class="about-box" style="background: none; padding: 0px">
              <img src="aboutUS.jpg" alt="Company Image" />
            </div>
            <div class="about-box">
              <h3>WORD FROM THE CEO</h3>
              <p>
                " We live in a rapidly changing world, a world in which survival
                in business must never be taken for granted, Our vision of the
                future must be clear and unequivocal in order to anticipate and
                respond to each new challenge and opportunity, We must
                constantly learn how to stay in business by adapting to the
                dynamic conditions in which we live and work, For that reason we
                are committed to offering you our impeccable services , Please
                do not hesitate to contact us for any of your catering needs ,
                Thank you !!! "
              </p>
            </div>
          </div>

          <!-- Team -->
          <div class="grid-3">
            <div class="icon-box card feature">
              <div class="about-box" style="background: none; padding: 0px">
                <img src="aboutUS.jpg" alt="Company Image" />
              </div>
              <i class="bi bi-gem"></i>
              <h4>Dan Munene</h4>
              <p style="color: var(--muted)">Master Chef</p>
              <p>
                Master Chef Leads the culinary team with expertise and passion.
                Crafts exceptional dishes by blending creativity with tradition.
                Ensures every meal meets the highest standards of taste and
                presentation.
              </p>
            </div>

            <div class="icon-box card feature">
              <i class="bi bi-inboxes"></i>
              <div class="about-box" style="background: none; padding: 0px">
                <img src="aboutUS.jpg" alt="Company Image" />
              </div>
              <h4>Gawi Mboya</h4>
              <p style="color: var(--muted)">Pastry Chef</p>
              <p>
                Our pastry chef, with years of experience in creating delightful
                baked goods, brings passion and creativity to every recipe. From
                handcrafted pastries to custom cakes, each treat is made with
                the finest ingredients and a touch of love. Indulge in our sweet
                masterpieces that turn any moment into a celebration.
              </p>
            </div>
            <div class="icon-box card feature">
              <div class="about-box" style="background: none; padding: 0px">
                <img src="aboutUS.jpg" alt="Company Image" />
              </div>
              <i class="bi bi-inboxes"></i>
              <h4>Faith Njuki</h4>
              <p style="color: var(--muted)">Pantry Chef</p>
              <p>
                Our skilled hot kitchen assistant plays a key role in preparing
                and cooking savory dishes, ensuring each meal is cooked to
                perfection. With a focus on speed, precision, and safety, she
                supports the chefs in delivering high-quality, flavorful dishes.
                Her dedication helps create the exceptional culinary experience
                we’re known for.
              </p>
            </div>
            <div class="icon-box card feature">
              <div class="about-box" style="background: none; padding: 0px">
                <img src="aboutUS.jpg" alt="Company Image" />
              </div>
              <i class="bi bi-clipboard-data"></i>
              <h4>Stephen Kamau</h4>
              <p style="color: var(--muted)">Salad Chef</p>
              <p>
                Specializes in preparing vibrant, fresh salads with a creative
                touch. Focuses on quality ingredients and perfect presentation.
                Works alongside the culinary team to deliver exceptional flavors
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- Gallery Section-->
      <section id="gallery">
        <h3>Gallery</h3>
        <div class="card">
          <div class="gallery">
            <% images.slice(0, 6).forEach((img, i) => { %>
            <!-- thumbnail: data-index corresponds to position inside `images` array -->
            <img
              src="<%= img.imageUrl %>"
              alt="Gallery image"
              data-index="<%= i %>"
            />
            <% }) %> <% if (images.length > 6) { %>
            <div class="more-overlay" role="button" onclick="openCarousel(6)">
              +<%= images.length - 6 %> more
            </div>
            <% } %>
          </div>
        </div>
      </section>

      <!-- Hidden encoded JSON data (safe) -->
      <div
        id="galleryData"
        style="display: none"
        data-images="<%= encodeURIComponent(JSON.stringify(images)) %>"
      ></div>

      <!-- Carousel Modal -->
      <div id="carouselModal" class="carousel-modal" style="display: none">
        <span class="carousel-close" aria-label="Close">&times;</span>
        <img
          class="carousel-content"
          id="carouselImage"
          alt="Full size image"
        />
        <a class="carousel-prev" aria-label="Previous">&#10094;</a>
        <a class="carousel-next" aria-label="Next">&#10095;</a>
      </div>

      <section id="contact">
        <h3>Book an Event</h3>
        <p style="color: var(--muted)">
          Fill out the form and we'll call or email to confirm your reservation.
        </p>

        <!-- Book us Section-->

        <div class="about-section">
          <div class="about-box" style="background: none; padding: 0px">
            <img src="aboutUS.jpg" alt="Company Image" />
          </div>
          <div class="about-box">
            <form id="bookingForm" onsubmit="handleBooking(event)">
              <div class="row">
                <input name="name" placeholder="Full name" required />
                <input name="phone" placeholder="Phone number" required />
              </div>
              <div style="margin-top: 8px">
                <input name="email" placeholder="Email (optional)" />
              </div>
              <div style="margin-top: 8px">
                <select name="package">
                  <option value="platinum">Platinum</option>
                  <option value="gold">Gold</option>
                  <option value="bronze">Bronze</option>
                </select>
              </div>
              <div style="margin-top: 8px">
                <textarea
                  name="details"
                  rows="4"
                  placeholder="Event details (date, number of guests, location)"
                ></textarea>
              </div>
              <div
                style="
                  margin-top: 12px;
                  display: flex;
                  gap: 10px;
                  align-items: center;
                "
              >
                <button class="btn" type="submit">Send Booking</button>
                <div id="bookingMsg" style="color: var(--muted)"></div>
              </div>
            </form>
          </div>
        </div>
      </section>

      <!--Blog section-->
      <section id="blog">
        <h3>All Blogs</h3>
        <p style="color: var(--muted)">
          From trending recipes to expert catering advice, our blog serves up
          everything you need to inspire your next gathering.
        </p>
        <%- include("./partials/blogPreview.ejs") %>
      </section>
    </main>

    <%- include("./partials/footer.ejs") %>

    <script>
      // counter script
      const counters = document.querySelectorAll(".counter-number");
      const speed = 100; // lower = faster

      counters.forEach((counter) => {
        const updateCount = () => {
          const target = +counter.getAttribute("data-target");
          const count = +counter.innerText;
          const increment = Math.ceil(target / speed);

          if (count < target) {
            counter.innerText = count + increment;
            setTimeout(updateCount, 30);
          } else {
            counter.innerText = target;
          }
        };

        updateCount();
      });

      (function () {
        let currentIndex = 0;

        window.moveCarousel = function (direction) {
          const carousel = document.getElementById("blogCarousel");
          if (!carousel) return;

          const cardCount = carousel.children.length;
          const visibleCards = getVisibleCards(); // how many fit per view

          // max index = total cards - visible per view
          const maxIndex = Math.max(0, cardCount - visibleCards);

          currentIndex = Math.min(
            Math.max(currentIndex + direction, 0),
            maxIndex
          );

          const cardWidth = carousel.children[0].offsetWidth + 20; // width + margin
          carousel.style.transform = `translateX(-${
            currentIndex * cardWidth
          }px)`;
        };

        function getVisibleCards() {
          if (window.innerWidth <= 480) return 1;
          if (window.innerWidth <= 768) return 2;
          return 3;
        }

        // Initialize background images
        document.querySelectorAll(".card-image").forEach((div) => {
          const bg = div.getAttribute("data-bg");
          if (bg) div.style.backgroundImage = `url(${bg})`;
        });

        // Auto-slide every 5s
        setInterval(() => {
          moveCarousel(1);
        }, 5000);
      })();

      // decode JSON safely from data attribute
      const raw = document.getElementById("galleryData").dataset.images || "";
      const images = raw ? JSON.parse(decodeURIComponent(raw)) : [];

      // elements
      const thumbs = document.querySelectorAll("#gallery .gallery img");
      const modal = document.getElementById("carouselModal");
      const modalImg = document.getElementById("carouselImage");
      const closeBtn = document.querySelector(".carousel-close");
      const prevBtn = document.querySelector(".carousel-prev");
      const nextBtn = document.querySelector(".carousel-next");

      let currentIndex = 0;

      function openCarousel(index) {
        if (!images.length) return;
        // ensure index is within bounds
        currentIndex = Math.max(0, Math.min(index, images.length - 1));
        modalImg.src = images[currentIndex].imageUrl;
        modal.style.display = "block";
        document.body.style.overflow = "hidden"; // prevent background scroll
      }

      // thumbnails (only up to 6 are in DOM)
      thumbs.forEach((t) => {
        t.addEventListener("click", () => {
          const idx = parseInt(t.dataset.index, 10);
          openCarousel(Number.isNaN(idx) ? 0 : idx);
        });
      });

      // controls
      closeBtn.addEventListener("click", () => {
        modal.style.display = "none";
        document.body.style.overflow = "";
      });

      prevBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        openCarousel((currentIndex - 1 + images.length) % images.length);
      });

      nextBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        openCarousel((currentIndex + 1) % images.length);
      });

      // clicking outside image closes
      modal.addEventListener("click", (e) => {
        if (e.target === modal) {
          modal.style.display = "none";
          document.body.style.overflow = "";
        }
      });

      // keyboard navigation
      document.addEventListener("keydown", (e) => {
        if (modal.style.display !== "block") return;
        if (e.key === "ArrowLeft") prevBtn.click();
        if (e.key === "ArrowRight") nextBtn.click();
        if (e.key === "Escape") closeBtn.click();
      });
    </script>
  </body>
</html>
